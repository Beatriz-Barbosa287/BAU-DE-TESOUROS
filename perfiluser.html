<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ba√∫ de Tesouros</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .container {
            display: flex;
            justify-content: center;
            padding: 40px 20px;
            gap: 50px;
            margin-left: 120px;
        }
    </style>
</head>

<body>




    <!-- Navbar lateral esquerda -->
    <div class="navbar-lateral">
        <ul>
            <li><a href="home.html"><span class="emoji">üè†</span><b> INICIO</b></a></li>
            <li><a href="paginadevendas.html"><span class="emoji">üê∑</span><b> VENDA</b></a></li>
            <li><a href="paginadedoacao.html"><span class="emoji">‚ù§Ô∏è‚Äçüî•</span><b> DOACAO</b></a></li>
            <li><a href="contato.html"><span class="emoji">üìß</span><b> CONTATO</b></a></li>
            <li><a href="perfil.html"><span class="emoji">üë§</span><b> PERFIL</b></a></li>
        </ul>
    </div>
    <div class="main-content">
        <div class="container-header">
            <header>

                <div class="search">

                    <a href="sacola.html" class="icone-sacola" title="Ir para sacola">
                        üõçÔ∏è
                    </a>
                    <input type="text" id="pesquisa" placeholder="Digite uma categoria: brinquedos, roupas, bonecas...">
                    <img id="icone-busca" src="https://img.icons8.com/ios-filled/24/search--v1.png" alt="Buscar"
                        style="cursor: pointer;">
                </div>
            </header>
            <h2 style="text-align:center; margin-top: 30px;">P√°gina de Perfil do Usu√°rio</h2>
            <br>
            <br>
            <main>





                <div class="container">

                    <!-- Formul√°rio de Edi√ß√£o -->
                    <div class="perfil-edicao">
                        <p>Ol√°! Voc√™ pode editar as informa√ß√µes do seu perfil na Ba√∫ de Tesouros. Por favor, preencha os
                            campos abaixo com as informa√ß√µes que voc√™ deseja atualizar.</p>

                        <label>Nome de Usu√°rio:</label>
                        <input type="text" id="nome_usuario">

                        <label>Seu Nome Completo:</label>
                        <input type="text" id="nome_completo">

                        <label>Seu E-mail:</label>
                        <input type="email" id="email">

                        <label>Sua Localiza√ß√£o (Cidade, Estado):</label>
                        <input type="text" id="localizacao">

                        <div class="botoes">
                            <button class="salvar">Salvar</button>
                            <button class="cancelar">Cancelar</button>
                        </div>
                    </div>


                    <div class="perfil-info">


                        <div class="avatar">
                            <i class="fa fa-user"></i> <!-- Ou uma imagem real se quiser -->
                        </div>
                        <div class="dados-usuario">
                            <strong>@Mam√£e Criativa</strong>
                            <div>Gislaine Pereira Ara√∫jo</div>
                            <div>gis.laine.aru@gmail.com</div>
                        </div>


                        <div class="produtos-cadastrados">
                            <p><strong>Produtos Cadastrados</strong></p>

                            <div class="produto-card">
                                <img src="/img/ITENS/eletronico computador.jpg" alt="Brinquedo">
                                <div class="produto-info">
                                    <strong>N√ÉO VENDIDO</strong>
                                    <p class="produto-data">cadastrado em 12/03/25</p>
                                </div>
                            </div>
                            <div id="meus-itens"></div>

                        </div>
                    </div>
                </div>

        </div>



</body>
<script>
    async function carregarMeusItens() {
        const resp = await fetch('http://localhost:3000/api/itensvenda');
        const itens = await resp.json();
        const lista = document.getElementById('meus-itens');
        lista.innerHTML = '<div class="produtos-cadastrados"><p><strong>Produtos Cadastrados</strong></p></div>';
        itens.forEach(item => {
            lista.innerHTML += `
      <div class="produto-card">
        <img src="http://localhost:3000/uploads/${item.foto}" alt="${item.nome}" width="120">
        <div class="produto-info">
          <strong>${item.nome}</strong><br>
          Valor: R$ ${item.valor}<br>
          Telefone: ${item.telefone}<br>
          Cidade: ${item.cidade} - ${item.uf}<br>
          <p class="produto-data">Cadastrado em: ${item.data_cadastro ? new Date(item.data_cadastro).toLocaleDateString('pt-BR') : ''}</p>
        </div>
      </div>
    `;
        });
    }
    carregarMeusItens();
</script>
<script>
document.querySelector('.salvar').onclick = async function () {
    const nome_usuario = document.getElementById('nome_usuario').value;
    const nome_completo = document.getElementById('nome_completo').value;
    const email = document.getElementById('email').value;
    const localizacao = document.getElementById('localizacao').value;

    const resp = await fetch('http://localhost:3000/api/usuario', {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ nome_usuario, nome_completo, email, localizacao })
    });

    if (resp.ok) {
        alert('Dados atualizados com sucesso!');
    } else {
        alert('Erro ao atualizar dados.');
    }
};

document.querySelector('.cancelar').onclick = function () {
    document.getElementById('nome_usuario').value = '';
    document.getElementById('nome_completo').value = '';
    document.getElementById('email').value = '';
    document.getElementById('localizacao').value = '';
};
</script>

</html>